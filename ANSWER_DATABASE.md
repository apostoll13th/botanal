# ‚ùì –£ –Ω–∞—Å GO –±–µ–∫–µ–Ω–¥ —Å–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã –∏ –¥–µ–ª–∞–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏?

## üéØ –ö–æ—Ä–æ—Ç–∫–∏–π –æ—Ç–≤–µ—Ç: –ù–ï–¢

### ‚ùå Go Backend –ù–ï —Å–æ–∑–¥–∞–µ—Ç:
- –¢–∞–±–ª–∏—Ü—ã
- –ò–Ω–¥–µ–∫—Å—ã
- –ú–∏–≥—Ä–∞—Ü–∏–∏

### ‚úÖ Go Backend —Ç–æ–ª—å–∫–æ:
- –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ë–î
- **–ñ–¥–µ—Ç** –ø–æ–∫–∞ —Ç–∞–±–ª–∏—Ü—ã –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã (–¥–æ 30 —Å–µ–∫)
- **–ß–∏—Ç–∞–µ—Ç** –¥–∞–Ω–Ω—ã–µ (SELECT queries)
- –û—Ç–¥–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ REST API

## üë®‚Äçüíª –ö—Ç–æ —Å–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã?

### ‚úÖ Python Bot - –í–õ–ê–î–ï–õ–ï–¶ —Å—Ö–µ–º—ã –ë–î

```python
# bot.py –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ:
wait_for_db()                    # –ñ–¥–µ—Ç PostgreSQL
init_db()                        # –°–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã
check_and_update_database()      # –ú–∏–≥—Ä–∞—Ü–∏–∏
```

## üîÑ –ü–æ—Ä—è–¥–æ–∫ –∑–∞–ø—É—Å–∫–∞

```
1. PostgreSQL  ‚Üí —Å—Ç–∞—Ä—Ç—É–µ—Ç –ø–µ—Ä–≤—ã–º
2. Bot         ‚Üí —Å–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã
3. Backend     ‚Üí –∂–¥–µ—Ç —Ç–∞–±–ª–∏—Ü—ã, –∑–∞—Ç–µ–º —á–∏—Ç–∞–µ—Ç
4. Frontend    ‚Üí –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ backend
```

## üõ°Ô∏è –ó–∞—â–∏—Ç–∞

### –í docker-compose.yml:
```yaml
backend:
  depends_on:
    - bot  # Backend —Å—Ç–∞—Ä—Ç—É–µ—Ç –ü–û–°–õ–ï bot
```

### –í Go –∫–æ–¥–µ:
```go
func initDB() {
    // –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ë–î
    db.Open(databaseURL)
    
    // –ñ–¥–µ—Ç —Ç–∞–±–ª–∏—Ü—ã (10 –ø–æ–ø—ã—Ç–æ–∫ √ó 3 —Å–µ–∫ = 30 —Å–µ–∫)
    for i := 0; i < 10; i++ {
        if checkTablesExist() {
            return  // –ù–∞—à–ª–∏ —Ç–∞–±–ª–∏—Ü—ã!
        }
        time.Sleep(3 * time.Second)
    }
}
```

## üìä –¢–∞–±–ª–∏—Ü–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

| –ó–∞–¥–∞—á–∞ | Bot (Python) | Backend (Go) |
|--------|--------------|--------------|
| –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç |
| –ú–∏–≥—Ä–∞—Ü–∏–∏ | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç |
| –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö | ‚úÖ –î–∞ | ‚úÖ –î–∞ |
| –ó–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç |

## üí° –ü–æ—á–µ–º—É —Ç–∞–∫?

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ –û–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã (Single Source of Truth)
- ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
- ‚úÖ Backend read-only = –±–µ–∑–æ–ø–∞—Å–Ω–æ
- ‚úÖ –ü—Ä–æ—â–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:
–ú–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –¥–æ–±–∞–≤–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ Go, –Ω–æ —ç—Ç–æ:
- ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- ‚ùå –°–ª–æ–∂–Ω–µ–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å
- ‚ùå –ë–æ–ª—å—à–µ –º–µ—Å—Ç –≥–¥–µ –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å—Å—è

## üìö –ü–æ–¥—Ä–æ–±–Ω–µ–µ:

–°–º. [DATABASE_ARCHITECTURE.md](DATABASE_ARCHITECTURE.md) –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è.

---

**–î–∞—Ç–∞:** 2024-11-09
